{% extends "base.html" %}
{% block title %}{{ event.title }} · SportsZone{% endblock %}

{% block extra_css %}
<style>
  .event-hero{position:relative;width:100%;max-height:500px;overflow:hidden;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.25);margin-top:10px;}
  .hero-banner{width:100%;height:100%;object-fit:cover;display:block;filter:brightness(.85);transition:transform .5s ease;}
  .event-hero:hover .hero-banner{transform:scale(1.05);}
  .hero-overlay{position:absolute;bottom:20px;left:20px;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.7);}
  .hero-title{font-size:2rem;font-weight:700;}
  .hero-subtitle{font-size:1rem;margin-top:.25rem;}
  @media (min-width:992px){ .sticky-side{position:sticky;top:1rem;} }
</style>
{% endblock %}

{% block body %}
<!-- Hero banner -->
<div class="event-hero mb-3">
  <img src="{{ url_for('static', filename='img/' ~ event.hero_image) }}"
       alt="{{ event.title }}" class="img-fluid hero-banner">
  <div class="hero-overlay">
    <h1 class="hero-title">{{ event.title }}</h1>
    <p class="hero-subtitle">{{ event.venue }}</p>
  </div>
</div>

{# Teams (derived from title like "Team A vs Team B") #}
{% set teams = event.title.split(' vs ') %}
{% if teams|length == 2 %}
<div class="d-flex justify-content-center align-items-center gap-4 mb-2">
  <div class="text-center">
    <div class="small fw-bold">{{ teams[0] }}</div>
  </div>
  <div class="h4 mb-0">vs</div>
  <div class="text-center">
    <div class="small fw-bold">{{ teams[1] }}</div>
  </div>
</div>
{% endif %}

<!-- Title, badges -->
<div class="d-flex flex-wrap justify-content-center align-items-center gap-2">
  <h1 class="h3 mb-0">{{ event.title }}</h1>
  <span class="badge text-bg-primary">{{ event.sport }}</span>
  <span class="badge text-bg-{{ event.badge }} badge-status">{{ event.status }}</span>
</div>
<p class="text-muted mb-3 text-center">
  {{ event.start_text }}{% if event.end_text %} – {{ event.end_text }}{% endif %} · {{ event.venue }}
</p>

<div class="row g-4">
  <!-- details, description -->
  <div class="col-lg-8">
<<<<<<< HEAD
    <section class="mt-3 about-event">
  <h2 class="h5 mb-3 text-primary fw-bold">About this event</h2>
  <p class="lead">
    <strong class="fw-bold">UEFA Euro 2025 Qualifier</strong> — Witness 
    <span class="text-decoration-none fw-bold">England</span> take on 
    <span class="text-decoration-none fw-bold">Spain</span> in a thrilling 
    group-stage clash under the lights at Wembley.  
  </p>
  <p class="text-muted">
    This is a family-friendly event with open seating, food trucks, and live entertainment. 
    <br><strong>Gates open at 6:45 pm</strong> — arrive early to avoid queues.
  </p>

  <dl class="row small event-details mt-3">
    <dt class="col-sm-3 fw-bold">Venue</dt>
    <dd class="col-sm-9"> Wembley Stadium, London</dd>

    <dt class="col-sm-3 fw-bold">Start</dt>
    <dd class="col-sm-9"> Sat 18 Oct, 7:30 pm</dd>

    <dt class="col-sm-3 fw-bold">End</dt>
    <dd class="col-sm-9"> Sat 18 Oct, 9:30 pm</dd>

    <dt class="col-sm-3 fw-bold">Home / Away</dt>
    <dd class="col-sm-9">England vs Spain</dd>
  </dl>
</section>
=======
    <section class="mt-1 about-event">
      <h2 class="h5 mb-3 text-primary fw-bold">About this event</h2>
      <p class="lead">{{ event.description }}</p>

      <dl class="row small event-details mt-3">
        <dt class="col-sm-3 fw-bold">Venue</dt><dd class="col-sm-9">{{ event.venue }}</dd>
        <dt class="col-sm-3 fw-bold">Start</dt><dd class="col-sm-9">{{ event.start_text }}</dd>
        {% if event.end_text %}
        <dt class="col-sm-3 fw-bold">End</dt><dd class="col-sm-9">{{ event.end_text }}</dd>
        {% endif %}
        {% if teams|length == 2 %}
        <dt class="col-sm-3 fw-bold">Home / Away</dt><dd class="col-sm-9">{{ teams[0] }} vs {{ teams[1] }}</dd>
        {% endif %}
      </dl>
    </section>
>>>>>>> 4ebb7324208b9fe63fa9704fc6e20ae9d022907e

    <!-- Comments -->
    <section class="mt-4">
      <h2 class="h5 mb-3">Comments</h2>
      <ul class="list-group mb-3">
<<<<<<< HEAD
        <li class="list-group-item">
          <b>Jake</b> <span class="text-muted small">· 12 Oct, 07:50</span>
          <p class="mb-0">Is there on-site parking at Wembley?</p>
        </li>
        <li class="list-group-item">
          <b>Tom</b> <span class="text-muted small">· 10 Oct, 18:05</span>
          <p class="mb-0">Is Foden playing?</p>
        </li>
      </ul>

=======
        {% for c in event.comments %}
          <li class="list-group-item">
            <b>{{ c.user }}</b> <span class="text-muted small">· {{ c.created_at }}</span>
            <p class="mb-0">{{ c.text }}</p>
          </li>
        {% else %}
          <li class="list-group-item text-muted">No comments yet</li>
        {% endfor %}
      </ul>

      {# Static demo form (disabled submit) #}
>>>>>>> 4ebb7324208b9fe63fa9704fc6e20ae9d022907e
      <form class="card p-3">
        <div class="row g-2">
          <div class="col-md-4">
            <label class="form-label">Your name</label>
            <input type="text" class="form-control" placeholder="e.g., Jack" required>
          </div>
          <div class="col-12">
            <label class="form-label">Comment</label>
            <textarea class="form-control" rows="3" placeholder="Write your comment…" required></textarea>
          </div>
          <div class="col-12">
<<<<<<< HEAD
            <button class="btn btn-outline-primary" type="submit" disabled>
              Post Comment 
            </button>
=======
            <button class="btn btn-outline-primary" type="submit" disabled>Post Comment</button>
>>>>>>> 4ebb7324208b9fe63fa9704fc6e20ae9d022907e
          </div>
        </div>
      </form>
    </section>
  </div>

  <!-- Booking panel -->
  <aside class="col-lg-4">
<<<<<<< HEAD
    <div class="card shadow-sm sticky-side">
      <div class="card-body">
        <h2 class="h6 mb-3">Book Tickets</h2>
        <div class="small text-muted mb-2">Tickets available: <b>120</b></div>

        <label class="form-label">Ticket type</label>
        <select class="form-select form-select-sm mb-2" aria-label="Ticket type">
          <option selected>General</option>
          <option>Student</option>
          <option>VIP</option>
        </select>

        <label class="form-label">Quantity</label>
        <input type="number" class="form-control form-control-sm mb-3" min="1" value="1">

        <button class="btn btn-primary w-100 mb-2" data-bs-toggle="modal" data-bs-target="#confirmModal">
=======
    {% set can_book = (event.status == 'Open') %}
    <div class="card shadow-sm sticky-side">
      <div class="card-body">
        <h2 class="h6 mb-3">Book Tickets</h2>
        <div class="small text-muted mb-2">
          {% if can_book %}Tickets available: <b>120</b>
          {% else %}<b>Booking unavailable ({{ event.status }})</b>{% endif %}
        </div>

        <label class="form-label">Ticket type</label>
        <select class="form-select form-select-sm mb-2" aria-label="Ticket type" {% if not can_book %}disabled{% endif %}>
          <option selected>General</option><option>Student</option><option>VIP</option>
        </select>

        <label class="form-label">Quantity</label>
        <input type="number" class="form-control form-control-sm mb-3" min="1" value="1" {% if not can_book %}disabled{% endif %}>

        <button class="btn btn-primary w-100 mb-2"
                data-bs-toggle="modal" data-bs-target="#confirmModal"
                {% if not can_book %}disabled aria-disabled="true"{% endif %}>
>>>>>>> 4ebb7324208b9fe63fa9704fc6e20ae9d022907e
          Book Now
        </button>
      </div>
    </div>
  </aside>
</div>
<<<<<<< HEAD
</main>

<!-- Confirmation modal -->
<div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Booking Confirmation</h5>
        <button class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body small text-muted">
        Order ID: <b>#BK-12345</b><br>
        Event: <b>England vs Spain</b><br>
        Date/Time: Sat 18 Oct, 7:30 pm<br>
        Venue: Wembley Stadium, London<br>
        Type: General · Qty: 1
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</a>
        <a class="btn btn-primary" href="booking.html">View Booking History</a>
      </div>
    </div>
  </div>
</div>

<footer class="bg-dark text-light mt-5">
  <div class="container py-4">
    <div class="row g-4 align-items-start">
      <div class="col-12 col-md-4">
        <a class="d-inline-flex align-items-center gap-2 text-decoration-none text-light" href="index.html">
          <img src="static/img/logoweb.png" alt="SportsZone" width="36" height="22">
          <strong>SportsZone</strong>
        </a>
        <p class="text-secondary small mb-0 mt-2">Local sports. Easy booking.</p>
      </div>
      <div class="col-6 col-md-4">
        <h6 class="text-uppercase small text-secondary mb-2">Quick links</h6>
        <ul class="list-unstyled mb-0">
          <li><a class="footer-link" href="index.html">Home</a></li>
          <li><a class="footer-link" href="create_event.html">Create Event</a></li>
          <li><a class="footer-link" href="booking.html">Booking History</a></li>
          <li><a class="footer-link" href="event.html">Event Details</a></li>
        </ul>
      </div>
      <div class="col-6 col-md-4">
        <h6 class="text-uppercase small text-secondary mb-2">Connect</h6>
        <div class="d-flex gap-3">
          <a class="footer-icon" href="#"><img src="static/img/FB.jpg" width="20" alt="Facebook"></a>
          <a class="footer-icon" href="#"><img src="static/img/insta.jpg" width="20" alt="Instagram"></a>
          <a class="footer-icon" href="#"><img src="static/img/GMAIL.jpg" width="20" alt="Gmail"></a>
          <a class="footer-icon" href="#"><img src="static/img/twitter.jpg" width="20" alt="X"></a>
        </div>
      </div>
    </div>

    <hr class="border-secondary-subtle my-4">
    <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start gap-2">
      <small class="text-secondary">© 2025 SportsZone. All rights reserved.</small>
      <small class="text-secondary">Terms · Privacy · Cookies</small>
    </div>
  </div>
</footer>

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>
=======

<!-- Confirmation modal -->
<div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">Booking Confirmation</h5>
      <button class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body small text-muted">
      Order ID: <b>#BK-12345</b><br>
      Event: <b>{{ event.title }}</b><br>
      Date/Time: {{ event.start_text }}{% if event.end_text %} – {{ event.end_text }}{% endif %}<br>
      Venue: {{ event.venue }}<br>
      Type: General · Qty: 1
    </div>
    <div class="modal-footer">
      <a class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</a>
      <a class="btn btn-primary" href="{{ url_for('main.booking') }}">View Booking History</a>
    </div>
  </div></div>
</div>
{% endblock %}
>>>>>>> 4ebb7324208b9fe63fa9704fc6e20ae9d022907e
