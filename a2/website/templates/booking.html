{% extends "base.html" %}
{% block title %}Booking History · SportsZone{% endblock %}

{% block extra_css %}
<style>
  .booking-card{border:1px solid rgba(72,72,72,.06);border-radius:14px;overflow:hidden;background:#bff1ec;transition:transform .15s, box-shadow .15s;}
  .booking-card:hover{transform:translateY(-4px);box-shadow:0 10px 24px rgba(0,0,0,.12);}
  .booking-row{min-height:200px;align-items:stretch;}
  .booking-thumb{width:100%;height:100%;object-fit:cover;display:block;}
  .booking-body{padding:1.25rem 1.25rem 1rem;display:flex;flex-direction:column;height:100%;}
  .booking-meta{margin-top:.25rem;}
  .booking-actions{margin-top:auto;}
  .booking-title{margin-bottom:.25rem;line-height:1.3;}
  .booking-badge{align-self:flex-start;margin-left:.75rem;}
  @media (max-width:576px){.booking-row{min-height:auto;}.booking-body{padding:1rem;}}
</style>
{% endblock %}

{% block body %}
<header class="mb-3">
  <h1 class="h3 mb-1">Your Bookings</h1>
</header>

{% if orders and orders|length > 0 %}
  <div class="row g-3">
    {% set color_map = {'Football':'primary','Basketball':'warning','Cricket':'success','Tennis':'secondary'} %}
    {% for o in orders %}
      <div class="col-12">
        <div class="card booking-card shadow-sm">
          <div class="row g-0 booking-row">
            <!-- image -->
            <div class="col-12 col-md-3 booking-thumb-wrap">
              <img src="{{ url_for('static', filename='img/' ~ o.image) }}" class="booking-thumb" alt="{{ o.event_title }}">
            </div>

            <!-- content -->
            <div class="col-12 col-md-9">
              <div class="booking-body">
                <div class="d-flex flex-wrap align-items-start">
                  <h5 class="booking-title mb-0">{{ o.event_title }}</h5>
                  <span class="badge text-bg-{{ color_map[o.sport] if o.sport in color_map else 'secondary' }} booking-badge">{{ o.sport }}</span>
                </div>

                <div class="booking-meta">
                  <p class="small text-muted mb-1">Booked on: <b>{{ o.booked_at }}</b></p>
                  <p class="small mb-2">
                    Order ID: <span class="fw-semibold">{{ o.order_code }}</span>
                    {% if o.quantity %} · Qty: <span class="fw-semibold">{{ o.quantity }}</span>{% endif %}
                  </p>
                </div>

                <div class="booking-actions">
                  <a href="{{ url_for('main.view_event', event_id=o.event_id) }}" class="btn btn-sm btn-primary">View Event</a>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info">
    You haven’t booked any events yet.
    <a href="{{ url_for('main.index') }}" class="alert-link">Browse events</a>
  </div>
{% endif %}
{% endblock %}

